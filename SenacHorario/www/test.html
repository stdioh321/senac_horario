<html>

<head>
    <title>Test</title>
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script src="json/config.js"></script>
    <script>
        var cursos;
        var horarios=[];

        $.ajax({
            url:config.urlCors+config.urlCursos,
            method:"GET"
        }).done(function(data,status){
            console.log(data);
            cursos = data.cursos;
            cursos.forEach(function(el,idx,arr){
                getHorarios(el.id);
            });
        }).fail(function(data,status){
            // console.log("ERROR", data);
        });

        function getHorarios(id){
            $.ajax({
                url:config.urlCors+config.urlHorarios + "?id="+id,
                method:"GET"
            }).done(function(data,status){
                horarios.push(data);
            }).fail(function(data,status){
                console.log(id);
                setTimeout(function(){
                    // console.log("Again");
                    getHorarios(id);
                }, Math.round(Math.random() * 3000));
            });
        }
    </script>
</head>

<body>
    <div>Oi</div>
</body>

</html>